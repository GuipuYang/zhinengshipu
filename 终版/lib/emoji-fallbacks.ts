// Emojiå…¼å®¹æ€§å¤‡ç”¨æ–¹æ¡ˆ
// ç”¨äºæ˜¾ç¤ºemojiä¸æ”¯æŒæˆ–ä¸å¯è§çš„é£Ÿæå›¾æ ‡

export const getSafeEmoji = (name: string): string => {
  const emojiMap: Record<string, string> = {
    // è”¬èœ
    'è¥¿çº¢æŸ¿': 'ğŸ…',
    'åœŸè±†': 'ğŸ¥”',
    'èƒ¡èåœ': 'ğŸ¥•',
    'é»„ç“œ': 'ğŸ¥’',
    'èŒ„å­': 'ğŸ†',
    'è¥¿å…°èŠ±': 'ğŸ¥¦',
    'ç™½èœ': 'ğŸ¥¬',
    'è èœ': 'ğŸ¥¬',
    'éŸ­èœ': 'ğŸŒ±',
    'é’æ¤’': 'ğŸ«‘',
    'å—ç“œ': 'ğŸƒ',
    'å±±è¯': 'ğŸ¥•',
    // è‚‰ç±»
    'ç‰›è‚‰': 'ğŸ¥©',
    'çŒªè‚‰': 'ğŸ¥“',
    'é¸¡è‚‰': 'ğŸ—',
    'ç¾Šè‚‰': 'ğŸ–',
    'é¸­è‚‰': 'ğŸ¦†',
    'æ’éª¨': 'ğŸ–',
    // æµ·é²œ
    'é±¼': 'ğŸŸ',
    'è™¾': 'ğŸ¦',
    'èƒèŸ¹': 'ğŸ¦€',
    'é±¿é±¼': 'ğŸ¦‘',
    'è›¤èœŠ': 'ğŸ¦ª',
    'æ‰‡è´': 'ğŸ¦ª',
    // è›‹ç±»
    'é¸¡è›‹': 'ğŸ¥š',
    'é¸­è›‹': 'ğŸ¥š',
    // è±†åˆ¶å“
    'è±†è…': 'ğŸ§ˆ',
    'è±†æµ†': 'ğŸ¥›',
    'è…ç«¹': 'ğŸ¥›',
    // ä¸»é£Ÿ
    'ç±³é¥­': 'ğŸš',
    'é¢æ¡': 'ğŸœ',
    'é¦’å¤´': 'ğŸ¥¯',
    'é¥ºå­': 'ğŸ¥Ÿ',
    // æ°´æœ
    'è‹¹æœ': 'ğŸ',
    'é¦™è•‰': 'ğŸŒ',
    'è‰è“': 'ğŸ“',
    'æ©™å­': 'ğŸŠ',
    'è¥¿ç“œ': 'ğŸ‰',
    // è°ƒå‘³æ–™
    'å§œ': 'ğŸŸ¤',
    'è’œ': 'ğŸ§„',
    'è‘±': 'ğŸ§…',
    'é…±æ²¹': 'ğŸ¶',
    'é†‹': 'ğŸ¶',
    'æ–™é…’': 'ğŸ·',
    'ç³–': 'ğŸ¬',
    'ç›': 'ğŸ§‚',
    'è¾£æ¤’': 'ğŸŒ¶',
  };

  return emojiMap[name] || 'ğŸ½ï¸';
};

// æ£€æµ‹emojiæ˜¯å¦æ”¯æŒ
export const isEmojiSupported = (emoji: string): boolean => {
  const ctx = document.createElement('canvas').getContext('2d');
  if (!ctx) return true;

  const fontSize = 40;
  ctx.font = `${fontSize}px "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji"`;

  // æµ‹è¯•emojiçš„å®½åº¦ï¼Œå¦‚æœä¸åŸºå‡†emojiç›¸åŒï¼Œè¯´æ˜æ˜¾ç¤ºä¸ºæ–¹æ¡†æˆ–é—®å·
  const width = ctx.measureText(emoji).width;
  const baselineWidth = ctx.measureText('ğŸ½ï¸').width;

  return width !== baselineWidth;
};
